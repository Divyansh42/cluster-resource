apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: cluster-resource-pipeline
spec:
  workspaces:
    - name: shared-workspace
  tasks:
    - name: authenticate-cluster
      taskRef:
        name: authenticate-cluster
      workspaces:
        - name: kubeconfigFile
          workspace: shared-workspace
      params:
        - name: name
          value: cluster-bot
        - name: username
          value: admin
        - name: url
          value: https://api.ci-ln-72n71c2-d5d6b.origin-ci-int-aws.dev.rhcloud.com:6443
        - name: clientCertificateData
          value: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURaekNDQWsrZ0F3SUJBZ0lJVEZKOC9LL20xTWN3RFFZSktvWklodmNOQVFFTEJRQXdOakVTTUJBR0ExVUUKQ3hNSmIzQmxibk5vYVdaME1TQXdIZ1lEVlFRREV4ZGhaRzFwYmkxcmRXSmxZMjl1Wm1sbkxYTnBaMjVsY2pBZQpGdzB5TURBME1EVXdPVE00TkRKYUZ3MHpNREEwTURNd09UTTRORE5hTURBeEZ6QVZCZ05WQkFvVERuTjVjM1JsCmJUcHRZWE4wWlhKek1SVXdFd1lEVlFRREV3eHplWE4wWlcwNllXUnRhVzR3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURPck5ucnptVnN2T3VjUzA0c3NlNGw5dEZmbTFwODZEeFFJUmFVTDlVeApNeXU0eHBzRUxGS3c4Rk5aTDZ1OUo0QjFoaTJlelN3WnVoVXk1d2J0Y013K0ZYQ21RNi9sN2g4MUk3QVZRNnpGClJKQVMvOTd3Y3V2bWRFUHh0VGJBZ09pMVh1ZjdueG5BWVNCUXowMitpc1dsUE5Uc3AyV2ZHL1pXeTk4TkdINHQKN1pCTFB2WDNtaXdZTnBjSEFZMm41SW9MV2d0VEhoeW9nZ0puVGxuY0xIQTAvR3BvcVNzbWtpZEhocXluUytYOApsbDhycGhTb3V6bk00TEF4NThNN2J0YmN4b3Bab05scTk2ejI5NVplaGkyRmV1SnFlTmF5VVdDdGx4LzNQU0JpCklwN1RCOGJMWFRJV1lteEp1bWJ3QU5WNGZmYU9xTk9vQ2ZzcmVnTk4rRGFUQWdNQkFBR2pmekI5TUE0R0ExVWQKRHdFQi93UUVBd0lGb0RBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXdEQVlEVlIwVApBUUgvQkFJd0FEQWRCZ05WSFE0RUZnUVVKcGlmMnRXeW1FSWlqTGhmQ0hKa0h1NFNKNTB3SHdZRFZSMGpCQmd3CkZvQVVKcGlmMnRXeW1FSWlqTGhmQ0hKa0h1NFNKNTB3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUVKMVVYdmUKRmZwZkJwb1YwVnYvQnRkSDBDeEx4ZXBjcFU2T2Y3Sm5XMyt0eXR1eXFnMkZJWmJEV0ZLdGQzUWFtNDQyK3ZvVAp4UXlna0N4RlQySStxRUpnL3B5WG4yS2VJZUptNExxMFRKVjBVT1lLVXZEalpiTmxMVWtMTmxhcVY3MDJBSjRSCnBGYkJwY3ZUYmx2cmg5TVBMSzZzQWFhbzhONVBIY3AvTkhlMHJaMmJJMTRGTUVlQWdmQ1lxQnBrVzJZbTRVclYKZ2l2N0kyek9RMGl4WCthTURJbGNDMndtdit3a3lpSkxZU250MmtxTEZEUXFCdGhJbmFseGovNnp2a2ZJNWZLYwp3T242UlRYWTVIUDYrVWRoRE5yWjhwSnJqbW5KOWlYQzVRWTBncmNUMmZsRTV0VkQ2Rmw4QkNvVkpra1RhOFc5ClUxNjc1MDRWeDJubGFHVT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
        - name: clientKeyData
          value: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBenF6WjY4NWxiTHpybkV0T0xMSHVKZmJSWDV0YWZPZzhVQ0VXbEMvVk1UTXJ1TWFiCkJDeFNzUEJUV1MrcnZTZUFkWVl0bnMwc0dib1ZNdWNHN1hETVBoVndwa092NWU0Zk5TT3dGVU9zeFVTUUV2L2UKOEhMcjVuUkQ4YlUyd0lEb3RWN24rNThad0dFZ1VNOU52b3JGcFR6VTdLZGxueHYyVnN2ZkRSaCtMZTJRU3o3MQo5NW9zR0RhWEJ3R05wK1NLQzFvTFV4NGNxSUlDWjA1WjNDeHdOUHhxYUtrckpwSW5SNGFzcDB2bC9KWmZLNllVCnFMczV6T0N3TWVmRE8yN1czTWFLV2FEWmF2ZXM5dmVXWG9ZdGhYcmlhbmpXc2xGZ3JaY2Y5ejBnWWlLZTB3ZkcKeTEweUZtSnNTYnBtOEFEVmVIMzJqcWpUcUFuN0szb0RUZmcya3dJREFRQUJBb0lCQUZvSXh1NkkvWG8vV3N5OQpxWktpK01JbElkVHFrcUx6Y01MZmh6eUxFZTdiQWVMKzhpMEJPZ3pHeFNpSE1lTzNQNmp6Q1JDekJORTRWVi9WCmNSa2pHSGE3VkZXNkN2aTVvWEsrMTBpTU1NbkhNcFIwVHlTa2k4dmJQbllmb1hoL0wrRkROUUJTc1I4enNLWkQKaVBURzg0OG1Ud1BCY08yOWVyVVpIMVJQSlRqUUNyRFk1SG9pUDVlOTJjZG1mbHFEdDV0UE1FeUZ2R0xhdWZ4cwpUdXBUVE5rTlozM0VNVGNHZG5iRW9pOTlBSlVlNlpnR0hzK05uMTlWUjNEY2JOQ3oraG5yMUtkMDNXTlZIbFJnCmVONEVrcUtKK0FNTVRIeksxRUJMYnhWTEgwWmJ3THNHQW9pV1kwNDR4UC9nU0VBOTBzTTJwVGg3OWRydkJndEgKN2MvVnNZRUNnWUVBNXFhMjJES3JWdVpiQldlbEdWV2xZL01janByN1Z0eWVwRVFlQ1BRTjNVV0NZeFVMd2VjZwpQTWs4M0E5aDV4aWhGNWdWdTJhWTBVTjJTV3pZM0V1amVQbE5ObVoweThmWVBYSkdvRTNCanN0cnYrZ3hsNVU0CjEwNWVkVjl2V2lwWXIyK3kyUkRhNHJLWHNZVTVyOG5UL053TmRjOEJGc01SdGlhOGZPOFNVU0VDZ1lFQTVXT1UKbXFGMFBmOTRQV0M4TDNLaVJCSDVhbEo0aGJKdVBLQ2hiYUZqVWY3S0llbFRmNkxEYVFDMVh3QjVMUHB6Z2JubwplKzAzTSszdFFVQnhDVzQzMXNka0NTZm1sdVhuQlIrcU9aazE5QjJzakxnNEpwYSttK01iVlRTTzZaWmNVT3ZNCmRZUHBUWW1GOFo3RytrQmJlMmJTNGNiRG82ZHVxRkEwWEN6bmJUTUNnWUFTMytPb2o0VHI2SS9jUWw0RlU3ZmsKRlBucVJZNTV6allCTlQzTDk4VEdyYkI4MFRVVUdnak9VSjExV0tEblcyR2JYNnV2bVRhNk1TNFYxaDFzOFplZwpCNjZrMi8rRXlZYk5pSE4xSE1mUkdwNW5wdVdnQk9zUTIyM3BadlRpeVFKVzRPb2V6ejFLUGRraUFzZjB0YXh1ClRjZWdNMTlnY0hnYmt0SHIyMWlCWVFLQmdRRE43bGNUZHN5WGVBaW0rWGdZRkk2T0U2RFpEWTY3WUJOTkJGdkgKd3ZJYVEyV05paDEyNFZVU3FCc3JYWTVyamJBeWp3YWljclJ6UHk4V3ZGWitROStIUnR1TXlMQmZXYWZMVnNFSQpFbjU0V0VkMjBVOC9mV2RESldCOVhzREovVDJGUEJzQ2lOaml6Z3BjZnRGZENuZldVZG9SN05IbjBzRXFBMDd1ClRUVzZOd0tCZ1FDZG9zb0ErdDNhd3l0SWNzWTlGRE4vTkh6cjl5UFRpT2NKNTgwUHpKY2xEQ2RIdzZMaGlqWVAKcnc1clFHY0hpQ2FrMHhzc2lTKytHOHpYTCtMaUgyS01yOWEzRUFySWFoMHZMSFNoZFRCbVZkMkUxVlBsa1VwYwpQc3NUMnRRWVdaUVQwUTdtdzdDcTgwcUwxT3czU0xXRkFOZGg5UjBlQ1ZpSlBKUHhkSTlYUXc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

    - name: test-task
      taskRef:
        name: test-task
      workspaces:
        - name: kubeconfigFile
          workspace: shared-workspace
      params:
        - name: filename
          value: kubeconfig
      runAfter:
        - authenticate-cluster