apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: cluster-resource-pipeline
spec:
  workspaces:
    - name: shared-workspace
  tasks:
    - name: authenticate-cluster
      taskRef:
        name: authenticate-cluster
      workspaces:
        - name: kubeconfigFile
          workspace: shared-workspace
      params:
        - name: name
          value: cluster-bot
        - name: username
          value: admin
        - name: url
          value: https://api.ci-ln-r32n47b-d5d6b.origin-ci-int-aws.dev.rhcloud.com:6443
        - name: clientCertificateData
          value: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURaekNDQWsrZ0F3SUJBZ0lJSnJOUGF2Y3MzdEl3RFFZSktvWklodmNOQVFFTEJRQXdOakVTTUJBR0ExVUUKQ3hNSmIzQmxibk5vYVdaME1TQXdIZ1lEVlFRREV4ZGhaRzFwYmkxcmRXSmxZMjl1Wm1sbkxYTnBaMjVsY2pBZQpGdzB5TURBME1EUXhPVEl3TlRGYUZ3MHpNREEwTURJeE9USXdOVEphTURBeEZ6QVZCZ05WQkFvVERuTjVjM1JsCmJUcHRZWE4wWlhKek1SVXdFd1lEVlFRREV3eHplWE4wWlcwNllXUnRhVzR3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUREd2R6VGIrVURKK3BVZHZrZjdtalNLQk10Ti9tMjQ3VHhxLzY4VUw4Qgo3ODhXd21iV1ZOTkFhZVlteHE4Rk1WeGsvc0kzZDc1MER4TUNYdU1veURSaVpHVkd0dnJ0ZHhsZC9XcHFOOXFyCnhCSlA1VllXRVVxNm5zbWUzWjVQYTJ5K21abUxwU0VNdUZmWmZGOXA2aEovOTJRV3BPV0NTUnA3eGdmM3VkYUQKY09VZlNmblc4STB6SzVrK3BGRWhHeFBVT2lGdi9UeThNQUZHMk9vdmNDTk12NEdhV2NvaS9FdEVkVUVTdHRaTAo2MTNrMm1IbUtKM0VZcSt5dkMyUUYrMUhRSnZGaG81SzJwU2dMbkEyeWxTQkJUWnlNSlYwKzNtT25udDh5NkVJCnhzVy9DZ2dhQWVjQ3hqaDNTMkhzVmcwbmllbCt4d1NBNmtNV1h1UGJJMUt0QWdNQkFBR2pmekI5TUE0R0ExVWQKRHdFQi93UUVBd0lGb0RBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXdEQVlEVlIwVApBUUgvQkFJd0FEQWRCZ05WSFE0RUZnUVUvT3Z0bkl0cnRaZXFISlJRckdIRDNnU21qK293SHdZRFZSMGpCQmd3CkZvQVUvT3Z0bkl0cnRaZXFISlJRckdIRDNnU21qK293RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUdEMENzMncKSWJIdjFpOXRlbi9YUnlGanFmcHZKSzFOcmdadmhzclc5RjVrcTBiZEpoOStEUmNTV3FzdGtaakl4cEJtYmdydQo5aVM2YWE3cnp1eXc0MDhHT1NYa3hSYkNQM0ZVZmtWSlo3Y25RVEJuNHVndnpxdmM0VElVQ1FaUGhBalhLNUFJCnRRNjZadWRFRE5ObE9ENmlabnVWT3BnbUFWeDU1Ym1ZMmZpeHh1UUVWQmpONzYzL1NYSXNoTzNDNlVycjlSTDMKM2hETGVBdGIyQzJIQ1ZhMGVwUjdWTCtFemJyREpJZW9kaWpSblpZOFJWN1ZPc2VGakRlRTRWczI0YWF0UzVLTwozYzlaRk8zSmRWTGZPUHNObUFOa3RxeTE2TzNwdWxLNDVUeE1iOWhXSkV5cUZsRksvUzRRTHA5NnNDQXZBcHhMCkczengraXRpVkt1R2txND0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
        - name: clientKeyData
          value: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdzhIYzAyL2xBeWZxVkhiNUgrNW8waWdUTFRmNXR1TzA4YXYrdkZDL0FlL1BGc0ptCjFsVFRRR25tSnNhdkJURmNaUDdDTjNlK2RBOFRBbDdqS01nMFltUmxScmI2N1hjWlhmMXFhamZhcThRU1QrVlcKRmhGS3VwN0pudDJlVDJ0c3ZwbVppNlVoRExoWDJYeGZhZW9TZi9ka0ZxVGxna2thZThZSDk3bldnM0RsSDBuNQoxdkNOTXl1WlBxUlJJUnNUMURvaGIvMDh2REFCUnRqcUwzQWpUTCtCbWxuS0l2eExSSFZCRXJiV1MrdGQ1TnBoCjVpaWR4R0t2c3J3dGtCZnRSMENieFlhT1N0cVVvQzV3TnNwVWdRVTJjakNWZFB0NWpwNTdmTXVoQ01iRnZ3b0kKR2dIbkFzWTRkMHRoN0ZZTko0bnBmc2NFZ09wREZsN2oyeU5TclFJREFRQUJBb0lCQUJMNnJzQkpMdmo1Vzd6SQp0Q3FtWUw5UFoxeVErc01Dbkw1NW9INzlqU2RRNnRFWUZBUmZ3UU9Ud042dGtMWitMS2tXRWhweW42SjgrNmpWCkxrejc3Q2hGOTVPOWxlS0VFNCtMVEUvMERsMXM2eUdYNkpySEhtbXRqM3E1bmVteFRwL0VJS0RyWjZMbUZJNWYKZ3Bpd093N3hHMkVlcDZuVUVKOURlZTVJdEVXVjl3YWRzejMxY0RNYmtFNzF4dVp4WEk4OU1xenFTeWRSekZ2cgpMSHVWT0JUSFhFR3owZzgrZGxqVXpQTlJvQVV5eTlZdld6UW9OTy9pUEY3bWw5WWlySnN5Y0d6LzM3RHRGS2dsCjgvWFVEQVd1SnVpVHExRjI2K0t6bE14bUJqZlU2aVVjcU55MHNOdFBvV0dPZlVaNERwN3IzUnhEakxyakdwRlYKeVNRV3drRUNnWUVBMDVTcjQ3bGw0ODhXQXBWODZBUkY4N29HWFhnL0pTeU5wSHdBNHJ6WmE4Z1pqbkRRSXVrTQpoNHlvMGxuT0RwSFkyZWhKWS83VTkyOHBxSDYxY1pIZExiZ1ROZ0xWdkxlVlY3OGkwRWlPWVd1aVhEK3VOT21TCkZVWXFFd3dqNlIzWGRiUzV2RXhBd2JDNTRVMk5TVDRBUHdzYTF4cmtWbUYwbDNKZVBDRkxMb1VDZ1lFQTdOckQKdVBySTNNZEpiS2hzNEI2RG5wWmliSjJKRVhQZ2E5OC96SU9GdW10SnptQVdNV0J1c1hSMy9vMGhzaGswRTB3aAphZzk2bXlEMTBKcjN0NGdwRWxHNzRHeXpYbzU4TmFoMFN1MnJlaVVzTWlrTzZWS0RYVW12Vk53eDk2bGcyWUhjClYvOHE0aDRPRmRpYXhPdXV6UnJOZ21QYjN4andmcjJJSzQ3NjhBa0NnWUJCQzgvY2JyNzRUazRCOVZzMUtUc28KTnVTR0Q5VzU0L3lYdU5lODNUb3FmSlgreUlmMGM1azZndS9UMjNBUjRweThRVUZ1MElWQW5KZytDTlpYVi9TYgpmWi9LVnd6R3U5blo1QlViMjNLS1dNRE5nM1pYSmdlWEtyNzhwQnJXTENwMU1WNTRtU2kvWTBtQ0RvbUZIdDZNCmd5bDVQL2M2NXpNazdEQTBaRGZzMFFLQmdRRGpuUWZoeC84blM4eGZ3eXQ5NVZVUEhlM1ArMFF4cFczUnZHVVAKSUlWdXRKUGs0Nm53SVgrK3dQSmZpVGtNY2ZQOVozZmsrS01XV1FKaFNjc3NjSWtudGF3YTY5c2p6MEhHUHZBaQo0V3Vjb2dScTM5SVludGJtMjF6RzdDU0lvQmtXYlJsVzV6eEt1QjlKRnpNRWNvazFTY0Njd1dJV2IxME9MdzJnCjduSndJUUtCZ1FDeTBYSVhaK25GUFpBMzlUZzROb0FOUnNrVzNuMnBzamgwRzhZeVkwMURCY2ZCVWoyZ3ZUYi8KUk83aWc2aVg2dEErcXBvV1RHUlo5VU9weUpaVCs3NHVWU3RQZGZmUk85bkk0TEVJYURMRXF1UUtJbHlISkRhaQpUb0xBK2JhRTZINGlyVkZBRTFUZkowMi84SEJvSEdLeGY2VnQ3aS9QcStrTkZ0bGtBSE1ISXc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

    - name: test-task
      taskRef:
        name: test-task
      workspaces:
        - name: kubeconfigFile
          workspace: shared-workspace
      params:
        - name: filename
          value: kubeconfig
      runAfter:
        - authenticate-cluster