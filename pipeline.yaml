apiVersion: tekton.dev/v1beta1
kind: Pipeline
metadata:
  name: cluster-resource-pipeline
spec:
  workspaces:
    - name: shared-workspace
  tasks:
    - name: authenticate-cluster
      taskRef:
        name: authenticate-cluster
      workspaces:
        - name: kubeconfigFile
          workspace: shared-workspace
      params:
        - name: name
          value: cluster-bot
        - name: username
          value: admin
        - name: url
          value: https://api.ci-ln-yidpjib-d5d6b.origin-ci-int-aws.dev.rhcloud.com:6443
        - name: clientCertificateData
          value: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURaekNDQWsrZ0F3SUJBZ0lJZloxUUFTc2tIRHN3RFFZSktvWklodmNOQVFFTEJRQXdOakVTTUJBR0ExVUUKQ3hNSmIzQmxibk5vYVdaME1TQXdIZ1lEVlFRREV4ZGhaRzFwYmkxcmRXSmxZMjl1Wm1sbkxYTnBaMjVsY2pBZQpGdzB5TURBME1EUXdOalV6TkRoYUZ3MHpNREEwTURJd05qVXpORGhhTURBeEZ6QVZCZ05WQkFvVERuTjVjM1JsCmJUcHRZWE4wWlhKek1SVXdFd1lEVlFRREV3eHplWE4wWlcwNllXUnRhVzR3Z2dFaU1BMEdDU3FHU0liM0RRRUIKQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUURBc1JMYTkrajRMRGR6RGFiclF0cVZQaFA4QWxYazZoZmkzSFF4UWxMQwpmMVcxNFZzd2I0eWt0ZGZIU3JTZ2NmNGdpbmtQaG5xOHB1OXMxYS8rYUdoNDBmN0ttUnh6OUtpV05BeUpVMVhOCnFEMlhTd0hLMHZ0UzNITHora1ZXUHpSalR6RE9jUjRsMlRwdWJzZURxa2xFRGZGVUlWbEF1NlFYSzkyenI5SmIKUE82d3p6NTAvd0hXT0hVRk8wc005L1gxRmRwVXV3a1NvK2VQYXFBalk5MVBmL1N0SjJESU1GMnRDeFJCK3FUTworWVJxNkowVnU2S2FWYTNlSlAxS3d4VUY1dkwxQzhvNGloankzaTR4L1FOcjgrN0xURFpPMGdyeThnSWhaaVVKCnIwc2xpZ1F2UjEwNDBtc21rS20yNFpTVnF2SVhRVkloR2dBdUs1S2V3VDlEQWdNQkFBR2pmekI5TUE0R0ExVWQKRHdFQi93UUVBd0lGb0RBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUlLd1lCQlFVSEF3SXdEQVlEVlIwVApBUUgvQkFJd0FEQWRCZ05WSFE0RUZnUVU5ZHRVRjdvV1hxMENKbVZUblpKU3hwZkdFOUV3SHdZRFZSMGpCQmd3CkZvQVU5ZHRVRjdvV1hxMENKbVZUblpKU3hwZkdFOUV3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUNDeThUZnMKNmVnUUpkV0N2cFg4S1cvUmhRNllGVzVtT004TEFtd29Ua1Voam15ZjlOODFhTUd5Rm9Id09Yb0h2N2VPQVRoTQo5SVU0RjQvSkUzYnRCSlk1S0RlRmRnT3ZMbXlKbjM1ekhENFFjUnR1R0FzSmRGaUp2QlBuTDBGZXhkbEhKMHp0CjF6SU9LZWtqcjE1cHRVSUpqeGJ3dm5hcWY0K2xUenhxWnFlZnlqcExGbnVyejZnMUs1dGtpUzRHOE93ck5SRHUKYm43VE1PZGlxZ0JTTjlSWmw0Tng0R1pEVkg4SERtUXE0TlRoU0FuclFnQVdCVjI1aDkwTkhEQ3ZnbXB4M3RUcwpCaDc3cXJaUmdjTDBjUTJEb3BPNVhQL1RvMG9KbW9VZ2xHbGRFMmxoSTFCdzl2emtEZWc5QXpaWmtxU1FuN0VvCms2YysxTmhQOFlSVDJLOD0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
        - name: clientKeyData
          value: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBd0xFUzJ2Zm8rQ3czY3cybTYwTGFsVDRUL0FKVjVPb1g0dHgwTVVKU3duOVZ0ZUZiCk1HK01wTFhYeDBxMG9ISCtJSXA1RDRaNnZLYnZiTld2L21ob2VOSCt5cGtjYy9Tb2xqUU1pVk5WemFnOWwwc0IKeXRMN1V0eHk4L3BGVmo4MFkwOHd6bkVlSmRrNmJtN0hnNnBKUkEzeFZDRlpRTHVrRnl2ZHM2L1NXenp1c004KwpkUDhCMWpoMUJUdExEUGYxOVJYYVZMc0pFcVBuajJxZ0kyUGRUMy8wclNkZ3lEQmRyUXNVUWZxa3p2bUVhdWlkCkZidWltbFd0M2lUOVNzTVZCZWJ5OVF2S09Jb1k4dDR1TWYwRGEvUHV5MHcyVHRJSzh2SUNJV1lsQ2E5TEpZb0UKTDBkZE9OSnJKcENwdHVHVWxhcnlGMEZTSVJvQUxpdVNuc0UvUXdJREFRQUJBb0lCQUIwY1kxbmJiRUhhQkVLSQpoSGcwY0d0dHBuMURLUkRkWU9Cd0o4bXRXRzF6NlZJQ0N0SEZlSDBGeitTVzM3VUJvNy9zeTU5UjFNY2RmVHgzCkNCQ3FXMll0YTQzV0ZkdGEwZ0ZuT2FHaGltdjRoOTJNZ21mTytoTXBwT0JCSmlxQ2YvcWs0eDI5THkzT3BLbzgKYUQzM0F2eWFFcVNBS1VqRFVHWUR4WW00L1ZHMUhsbnFRM0xlcjJoYVJaU1ZzYnBMUmI3Qll3eEloZVd0UEhYMApDM2xvd1VoU2lXcSttaDNRSzZKWDVMYXVtempsMVZzREl5cFFidnZSY2FtWFFhT0gyNFE0Z1BObXFyQitaQlc3Cm13MUJYN3piYUl1SmJUMjVFUllpZjlyS1dtWnBVUzdrS0FIOStEa0U2QUNjQlF3UDBncnkrM3l4RkpJcHNhYUwKYW1MTCt3RUNnWUVBeGhYSitYZXMyQTl5Ulpadnl3SURDR004dVdHUXp2YzFFT0l0ZksxRXNhSDZMWlB3NWFpTQppWGpweTI3TGJzWU9HYVdwVWs1U2dXa0dQWDJvak9Cb2hoUVVqVXdSdnZLYlRkbHVIMmVneTE3OWU4SU9DSXp1ClJpODFoNHpWNk0vTk5EM3lUWEV3TmtEL0FzQ0ZiTjFPMFpaSUF1ZlZNemtBWldyM0wvcmdwTU1DZ1lFQStRZVoKaTBuWjVsNTBIc0puOGxPV0Q3bUlua2hFbndzeEpJWXU2QncyOExMR3FEZ2NOd0lhNGxWa25LazJQeEpITEdKUApQWnRJN21lc295ZzV3Q2tvY3NKMEJMUGZPcU1kbW9OR005aCtFSWxuV2h6RHp1TlFRK1NwWHgwaEdmSjU3UjJ6ClRnV2lic3ZYYWppV3FYZi9Demdqd2NQRTdlQ2U3RHFBbkVzaFU0RUNnWUF6bEM3Z2Q2b1pKSVNEM0RWRjdrTXQKNXZGRDhFVE5yNDh3MDBRMjU4TXdZZFlNRWk2ekRsMXgybnMrVHA1SVBPZ2xBMzhBZ0laNVRnaWk4RnA0UEdMYgpMdFZmS1lTaGJQakZuNjFPSGlTL2IvK2ZQeHQ2WElBYTVHWVM0cmc4aEFlUjUrTjFDTmtkOTNTdm1jUGtZZ2dKCkNSRzlOL0xMQUxlNnNNeW13TFBJRXdLQmdRQ2pqbVUvQVVNV3RXUm9xMkFmM053SytkMExzQVU1dTkwTDB3Rk4KdXZJdWhneEpnWWl1YkRpQi9IbTNGcitsRHZrbDRtK08wOFZEcDEzUVR1UVhIREVQcGowU3RaeGdZNjlXd3U5QgpyK2VrTHNwdGVjVDB4WUQ3Qmx4ak5ydDkwaTVZR0pDaUpyczNMN1FNZEp3bk04T1RkOHlzUDByQXZTMURrMnpTCnVkbHFnUUtCZ1FDZHNvODNwSVJoRzBCVUN0elQ3Y1pFR2xKdndlaHlwUWlkZkRjSENkczVWYlF0blRqb0kralEKL082akVHbWN6cEhlVzQ4UGJydUw5MXpLMDRhUnVBelNIRjBpUi9MbFJLWEdkRmVaMTRKU0ZFdFV3Qmd1VjhYZApMWHhWSHBiNmZEQXE3VkUvaVduN2RDQkI2V3JmcGJJTExwSk9sSkg5VVQzallBZEtWd0dVNnc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=

    - name: test-task
      taskRef:
        name: test-task
      workspaces:
        - name: kubeconfigFile
          workspace: shared-workspace
      params:
        - name: filename
          value: kubeconfig
      runAfter:
        - authenticate-cluster